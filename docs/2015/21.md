---
day: 21
title: Day 21
main_img:
  name: "RPG Fight"
  link: /assets/images/rpg-fight.jpg
tags: 
  - name: Comprehensions
    link: /python/comprehensions
  - name: Defaultdict
    link: /python/defaultdict
  - name: LRU Cache
    link: https://docs.python.org/3/library/functools.html#functools.lru_cache
---

## Page Navigation

- [Problem Intro](#problem-intro)
- [Part 1](#part-1)
- [Part 2](#part-2)
- [Results](#results)

## Problem Intro

We need win an RPG computer game match. 

We alternative taking turns with the CPU.  The CPU is playing the boss. The current player attacks on their turn.
- The attack reduces the opponent's hit points.
- The loser is player whose hit points reach 0 (or lower).
- `Damage taken = attacker's damage - defender's armor`, with a minimum of 1.
- Damage and armor score start at 0 and can be increased by buying items from the shop, in exchange for gold. Gold is unlimited.

The shop's products are given to us:

```text
Weapons:    Cost  Damage  Armor
Dagger        8     4       0
Shortsword   10     5       0
Warhammer    25     6       0
Longsword    40     7       0
Greataxe     74     8       0

Armor:      Cost  Damage  Armor
Leather      13     0       1
Chainmail    31     0       2
Splintmail   53     0       3
Bandedmail   75     0       4
Platemail   102     0       5

Rings:      Cost  Damage  Armor
Damage +1    25     1       0
Damage +2    50     2       0
Damage +3   100     3       0
Defense +1   20     0       1
Defense +2   40     0       2
Defense +3   80     0       3
```

Shop rules:
- We must buy exactly one weapon.
- We can buy one armor item.
- We can buy 0, 1, or 2 rings.
- The shop only has one of each item.

**We start with 100 hit points. Our damage and armor scores are given by the sum of the respective values of the items we have bought. Our opponent's starting hit points, damage and armor scores are given to us as input.** E.g.

```text
Hit Points: 104
Damage: 8
Armor: 1
```

## Part 1

**What is the least amount of gold you can spend and still win the fight?**

Let's start with the easy part: reading in the shop information. I copied the shop text into a file, because I didn't know if the shop data might change for Part 2. Then, I read the shop data as follows:

```python

```

<img src="{{'/assets/images/elf_delivery_pt1_output.png' | relative_url }}" alt="Elf drops, Part 1" width="640px" />

<pre class="language-plaintext highlighter-rouge highlight">
<grn>House</grn>   Elf 1   Elf 2   Elf 3   Elf 4   Elf 5   Elf 6   <ylw>Running Total</ylw>
<grn>1</grn>       10      -       -       -       -       -       <ylw>10</ylw>
<grn>2</grn>       10      20      -       -       -       -       <ylw>30</ylw>
<grn>3</grn>       10      -       30      -       -       -       <ylw>40</ylw>
<grn>4</grn>       10      20      -       40      -       -       <ylw>70</ylw>
<grn>5</grn>       10      -       -       -       50      -       <ylw>60</ylw>
<grn>6</grn>       10      20      30      -       -       60      <ylw>120</ylw>
</pre>

## Part 2

<img src="{{'/assets/images/elf_delivery_pt2_output.png' | relative_url }}" alt="Elf drops, Part 2" width="720px" />

## Results
