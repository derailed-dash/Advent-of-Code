---
day: 22
title: Day 22
main_img:
  name: "Wizard Fight"
  link: /assets/images/wizard-fight.jpg
tags: 
  - name: Dataclass
    link: /python/classes#dataclass
---

## Page Navigation

- [Problem Intro](#problem-intro)
- [Part 1](#part-1)
- [Part 2](#part-2)
- [Results](#results)

## Problem Intro

Following on from [Day 21](/2015/21){:target="_blank"}, we're asked to turn our RPG simulator into a Wizard Fight Simulator!

**_This was the worst!_**

My first solution took me many hours to write, it works, but it takes several hours to run!!  So, I needed to do some significant re-writing to make it run quickly.

Rules:
- The player and boss take alternating turns, and the player goes first.
- If a player's _hit points_ is reduced to 0 or less, then that player loses.
- The boss continues to use _mundane_ (non-magical) attacks, but the _player_ is a _wizard_ and instead casts spells.
- The player starts with 50 _hit points_ and 500 _mana_. The _mana_ is the currency for casting spells.
- The boss still starts with _hit points_ and _attack damage_. Boss armor is irrelevant, since player spells ignore armor.
- The player has magical armor, which depends on spells cast. The armor is used to reduce the effectiveness of the boss's mundane attacks, just as before. Minimum attack damage is 1, as before.
- The player chooses a spell to cast on their turn. If the player does not have enough mana to cast a spell, the player loses. Mana is immediate deduced when a spell is cast.
- Effects last for `n` turns.  The effect timer is started on turn `n`, but begin applying on turn `n+1`. Effects apply at the _start_ of _both turns_, i.e. player and boss. The turn timer is decreased _after the effect is applied_. The effect ends as soon as the timer reaches 0.
- It is not permitted to start an effect that is already active. But an effect can be started on the same turn that the effect ends.

Spell details:

|Spell|Mana Cost|Description|
|-----|---------|-----------|
|Magic missiles|53| Does 4 instant damage |
|Drain|73| Does 2 instant damage and adds 2 _hit points_ |
|Shield|113| Effect: effective armor is increased by 7 for 6 turns |
|Poison|173| Effect: deals 3 damage at the start of the turn, for 6 turns |
|Recharge|229| Effect: adds 101 mana at the start of each turn, for 5 turns |

## Part 1

Boss stats are given in the input.

**What is the least amount of mana you can spend and still win the fight?**

(The _mana recharge_ effect does not count as "spending" _negative_ mana.)

## Part 2

## Results

<img src="{{'/assets/images/2015-21-all-output.png' | relative_url }}" alt="Boss Fight Output" width="760px" />

