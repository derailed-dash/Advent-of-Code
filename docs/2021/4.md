---
topic: Advent of Code
year: 2021
day: 4
title: Day 4
problem: Giant Squid
tags: 
  - name: NumPy
    link: https://numpy.org/devdocs/user/quickstart.html
  - name: partition
  - name: deque
  - name: enumerate
  - name: any
  - name: all
  - name: 2D arrays
---
{% assign the_year = site.data.navigation.pages | where: 'name', page.year %}
{% assign next = page.day | plus: 1 %}
{% assign prev = page.day | minus: 1 %}
{% assign prev_page = the_year[0].members | where: 'name', prev %}
{% assign next_page = the_year[0].members | where: 'name', next %}
<img src="{{'/assets/images/squiddy.jpg' | relative_url }}" alt="Squiddy" style="margin:15px 10px 10px 10px; float: right; width:400px" />

# {{ page.topic}} {{ page.year }} - {{ page.title }}

## Useful Links
{% if prev_page[0] %}<a class="dazbo-link-button nav-button" href="{{ prev_page[0].link | relative_url }}">&#8249;</a>{%- endif -%}
{%- if next_page[0] -%}<a class="dazbo-link-button nav-button" href="{{ next_page[0].link | relative_url }}">&#8250;</a>{% endif %}

- [2021 Main Page]({{ the_year[0].link | relative_url }})
- [My solution code]({{ site.github.repository_url }}/tree/master/src/AoC_2021){:target="_blank"}
- AoC page: [{{ page.problem }}](https://adventofcode.com/{{ page.year }}/day/{{ page.day }}){:target="_blank"}

## Concepts and Packages Demonstrated

{% for item in page.tags %}
{%- if item.link -%}
<a class="dazbo-link-button" href='{{ item.link }}' target="_blank">{{ item.name }}</a>
{%- endif -%}
{% endfor %}

{% for item in page.tags %}
{%- if item.link == Nil -%}
<span class="dazbo-nolink-button">{{ item.name }}</span>
{%- endif -%}
{% endfor %}

## Solution Intro

A giant squid has attached itself to the sub.  We're going to play bingo with it!

Our input is a single comma-delimited line of numbers to be drawn, followed by multiple 5x5 bingo boards. As we draw numbres, they are marked off on the boards. The input data looks something like this...
```
7,4,9,5,11,17,23,2,0,14,21,24,10,16,13,6,15,25,12,22,18,20,8,19,3,26,1

22 13 17 11  0
 8  2 23  4 24
21  9 14 16  7
 6 10  3 18  5
 1 12 20 15 19

 3 15  0  2 22
 9 18 13 17  5
19  8  7 25 23
20 11 10 24  4
14 21 16 12  6
```

### Setup

Nothing special here.  But we are going to use [NumPy](https://numpy.org/devdocs/user/quickstart.html){:target="_blank"} again.

```python
import logging
import os
import time
from collections import deque
import numpy as np

SCRIPT_DIR = os.path.dirname(__file__) 
INPUT_FILE = "input/input.txt"
# INPUT_FILE = "input/sample_input.txt"

logging.basicConfig(format="%(asctime)s.%(msecs)03d:%(levelname)s:%(name)s:\t%(message)s", 
                    datefmt='%H:%M:%S')
logger = logging.getLogger(__name__)
logger.setLevel(level=logging.INFO)
```

### Part 1

Determine which board will win, in order to beat squiddy.  The winning board is the first board where all numbers in any row or any column are marked off.  We also need to know the `score` of the winning board, which we're told is the product of all the unmarked numbers, and the number that was last called.

First, let's process the the input data:

```python
input_file = os.path.join(SCRIPT_DIR, INPUT_FILE)
with open(input_file, mode="rt") as f:
    data = f.read()

draw_numbers, bingo_cards = process_data(data)

def process_data(data: str) -> tuple[deque, np.ndarray]:
    """ Takes raw str data. Converts first line to a list of int. Converts remaining blocks into a 3D Numpy array. """
    # get the first line
    draw_numbers = deque(map(int, data.partition('\n')[0].split(",")))
    
    # Get list of cards, where each card is a list of 5 rows, 
    # which each row being a list of 5 ints
    # E.g. one card = [[66, 78, 7, 45, 92], [39, 38, 62, 81, 77], [...], [...], [...]]
    bingo_cards = [[list(map(int, row.split())) for row in card.splitlines()] 
                    for card in data.split('\n\n')[1:]]
    
    return draw_numbers, np.array(bingo_cards)
```

We first `read()` the data into one big `str`. Then we use `partition()` to split the data into three chunks: the bit before the first carriage return, the carriage return itself, and the bit after the carriage return.  

### Part 2


```python

```


{% if prev_page[0] %}<a class="dazbo-link-button nav-button" href="{{ prev_page[0].link | relative_url }}">&#8249;</a>{%- endif -%}
{%- if next_page[0] -%}<a class="dazbo-link-button nav-button" href="{{ next_page[0].link | relative_url }}">&#8250;</a>{% endif %}