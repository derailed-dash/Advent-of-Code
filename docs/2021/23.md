---
day: 23
title: Day 23
main_img:
  name: Amphipods
  link: /assets/images/amphipods.jpg
tags: 
  - name: Breadth First Search (BFS)
    link: https://www.redblobgames.com/pathfinding/a-star/introduction.html
  - name: heapq
    link: https://realpython.com/python-heapq-module/
---
## Solution Intro

Yep, this one was hard too.  Not as hard as yesterday though.  It was much easier to see how to do the solution. Essentially, you have two options:

1. With a **Dijkstra breadth first search (BFS)**.
1. With **recursion with memoization**.

I've opted for Dijkstra, and I'll describe the solution here.

### Overview

We're told we have four types of amphipods, labelled `A`, `B`, `C` and `D`. They live in burrow made up of a hallway and side rooms. Each room is full of amphipods, using a configuration given as our starting input.

The sample input looks like this:

```txt
#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
```

Empty space is denoted by `.`.

## Part 1

**What is the least energy required, in order to rearrange the amphipods such that all the `A` pods are in the first hall, all of the `B` pods are in the second, and so on?**

So ultimately, we need to end up in this configuration:

```txt
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
```

There are **rules** to amphipod movement:

- They can move to an unoccuped space.
- They cannot move past another amphipod.
- They are not allowed to stop in the hall if they stop immediately above (and thus blocking) a room. Otherwise, any empty space in the hall is fair game.
- They are only allowed to move into a room, if that room is the correct target room. E.g. a `B` pod can only enter the second room. Furthermore, they can only enter their destination room if either:
  - That room is empty.
  - Or, that room contains only _matching_ amphipods. E.g. if the second room contains a `B`, then a `B` can enter it.  But if the second room contains a `C`, then nothing can enter it.
- If an amphipod stops in the hallway, it cannot move again, unless it is moving directly to its target room.
- Lastly, amphipod movement requires different amounts of energy:
  - `A = 1 per step`
  - `B = 10 per step`
  - `C = 100 per step`
  - `D = 1000 per step`

Thus, it's intuitively obvious that `D` pods need to move as little as possible!

