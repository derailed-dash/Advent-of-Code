---
day: 20
title: Day 20
main_img:
  name: Image Enhancement
  link: /assets/images/pixel-image.jpg
tags: 
  - name: PIL
    link: https://www.geeksforgeeks.org/python-pillow-colors-on-an-image/
  - name: binary
---
## Solution Intro

We're told we have an image from our scanners, but it needs enhancing.  Our input contains two different things:

1. The image enhancement algorithm
1. The input image itself

The input looks something like this:

```
..#.#..#####.#.#.#.###.##.....###.##.#..###.####..### // .#.#.#...##..#.#..###..#####........#..####......#..#

#..#.
#....
##..#
..#..
..###
```

The first line is actually 512 chars is length, but I've trimmed it above (indicated using `//`), for readability. Then we have a blank line, followed by the image we need to enhance, whihc is itself split over multiple lines.  The image is a 2D grid of light pixels (indicated by `#`) and dark pixels (indicated by `.`).

The image enhancement algorithm does the following:

- Looks at each pixel in the 2D grid. For each pixel, determines the 3x3 grid of 9 pixels that have that pixel at its centre.
- Converts these 9 pixels into a binary representation, i.e. a 9-bit value, where `.=0` and `#=1`. (The 3x3 grid is read from top left to bottom right, across then down.) Thus, each pixel maps to a 9-bit value.
- Uses that 9-bit as an index to lookup a character position in the image enhancement line, using 0-based indexing. I.e. where an index of 0 is the first character, 1 is the second character, and so on.
  - Note that a binary value of _`0b`_`000000000` = 0 in decimal. Thus, this would be a lookup to the first character in the algorithm.
  - A binary value of _`0b`_`111111111` = 512 in decimal. Thus, this would be a lookup of the last character in the algorithm. (Since it's a 512-character `str`.)
- We're told that the algorithm should apply to all pixels _simultaneously_.  This makes life a bit easier.

Consider the original image to be on an infinite canvas of dark pixels.
Each pass of enhancement will change the original pixels, but will also grow the image at the border.

## Part 1

We're asked to assemble the full map of scanners and beacons, and **determine how many becaons there are.**



### Setup

