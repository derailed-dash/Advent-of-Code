---
day: 14
title: Day 14
problem: Extended Polymerization
main_img:
  name: Folding paper
  link: /assets/images/molecules.jpg
tags: 
  - name: dataclass
  - name: Counter
  - name: recursion
---
## Solution Intro

A problem like this one can break your brain.  Conceptually, it's quite simple.  But implementing can be quite trickly.

```
6,10
0,14
9,10
0,3
10,4
4,11
...
fold along y=7
fold along x=5
```

## Part 1

We're asked how many dots are visible, after performing the first fold instruction. (Remember that some dots will overlap.)

### Setup

Nothing new here. I'm using **matplotlib** because I want to do some visualisation later.

```python
from dataclasses import dataclass
import logging
import os
import time
from matplotlib import pyplot as plt

SCRIPT_DIR = os.path.dirname(__file__) 
INPUT_FILE = "input/input.txt"
# INPUT_FILE = "input/sample_input.txt"

logging.basicConfig(format="%(asctime)s.%(msecs)03d:%(levelname)s:%(name)s:\t%(message)s", 
                    datefmt='%Y-%m-%d %H:%M:%S')
logger = logging.getLogger(__name__)
logger.setLevel(level=logging.DEBUG)
```

### The solution

First, some basic **dataclasses**:

```python
@dataclass
class Instruction:
    """ Paper fold instruction """
    axis: str   # x or y
    val: int
    
@dataclass(frozen=True)
class Point:
    x: int
    y: int
```

Note that we've made the `Point` class `frozen`.  This makes instances of this class _immutable_ and _hashable_.  We need these `Point` objects to be hashable, because we're going to store them in a `set` later.

We'll now read in the data:

## Part 2

Now we're told to perform all the remaining fold instructions.  We're told we ultimately need an 8 character sequence. So it stands to reason that the final position of the dots will represent these 8 characters. 

We've already done all the work.  All we need to do is perform the remaining folds, and print the `Paper`:

```python
# Part 2 - All remaining instructions
for instruction in instructions[1:]:
    paper.fold(instruction)
    
logger.info("Part 2: %d dots are visible", paper.dot_count)
logger.info("Part 2 decoded:\n%s", paper)
```

Barely an inconvenience!!

With my real data, the result is this:

```
2022-01-20 21:21:17.505:INFO:__main__:  Part 1: 720 dots are visible
2022-01-20 21:21:17.510:INFO:__main__:  Part 2: 104 dots are visible
2022-01-20 21:21:17.513:INFO:__main__:  Part 2 decoded:
 ##  #  # ###  ###  ###   ##  #  # ####
#  # #  # #  # #  # #  # #  # #  #    #
#  # #### #  # #  # #  # #  # #  #   #
#### #  # ###  ###  ###  #### #  #  #
#  # #  # #    # #  #    #  # #  # #
#  # #  # #    #  # #    #  #  ##  ####
2022-01-20 21:21:17.516:INFO:__main__:  Execution time: 0.0038 seconds
```

So the solution answer was AHPRPAUZ. Easy!

![Manual code]({{"/assets/images/dots_code.png" | relative_url }}){:style="width: 400px"}
